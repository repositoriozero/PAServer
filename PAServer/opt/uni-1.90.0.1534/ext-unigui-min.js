/*!
 * uniGUI Library extension for Sencha Ext JS
 * by Farshad Mohajeri  
 * Copyright(c) 2009-2020 FMSoft Inc.
 * info@fmsoft.net
 * http://www.unigui.com
 * http://www.fmsoft.net
!*/
var eventDLM="\3";function uniGetValues(form){if(!form||form.destroyed){return""}var values=form.getValues(false,true,false,true),res="",val="",encoder=encodeURIComponent,radioTF={};radioTF[false]="off";radioTF[true]="on";for(var propertyName in values){var ffield=null;try{ffield=eval(propertyName)}catch(err){ffield=null}if(ffield&&ffield.getValue&&!ffield.fieldEditBusy){if(ffield.submitState==undefined){ffield.submitState=0}else{ffield.submitState++}ffield.submitState%=65535;ffield.submittedValue=ffield.getValue();if(typeof ffield.originalValue!="object"){ffield.originalValue="\0"}else{if(ffield.getXTypes().indexOf("checkboxgroup")>0){_sdb_(ffield)}else{if(Ext.isDate(ffield.originalValue)){ffield.originalValue.setFullYear(0)}}}var stVal="";if(ffield.stateValue!=undefined){stVal=ffield.stateValue}var stSub=ffield.submitState.toString(16);ffield.fieldEdited=false;if(ffield.uniNameValue&&ffield.getXValue){val=ffield.getXValue()}else{if(ffield.uniFmtObj){val=ffield.getValue()}else{if(ffield.isXType("timefield")){val=_ts_(ffield.getValue())}else{if(ffield.getXTypes().indexOf("radiofield")>0){val=radioTF[ffield.getValue()]}else{if(ffield.isXType("datefield")){val=_dts_(ffield.getValue())}else{if(ffield.isXType("ux-codemirror")||ffield.isXType("canvasfield")){val=ffield.getValue()}else{if(ffield.getXTypes().indexOf("checkboxgroup")>0){val=obj2str(ffield.getValue())}else{val=values[propertyName]}}}}}}}if(Ext.isArray(val)){val=val.join(";")}if(val==null){val=""}res+="&"+encoder(propertyName)+"="+encoder("\2"+stSub+"\2"+stVal+"\2"+val)}}return(res)}function _sdb_(d){if(d.getBoxes){var c=d.getBoxes(),a,e=c.length;for(a=0;a<e;a++){c[a].originalValue=undefined}}}function _cgds_(b,a){delete b.dirtyRow;if(a){b.hideMask(true)}}function xlatRow(a){var b=a.record;if(b&&b.data._d){var c=b.data._d;if(a.rowIdx&2147483648){c|=2147483648}return(c)}return a.rowIdx}function xlatRecRow(a,c){if(c&&c.data._d){var b=c.data._d;if(a&2147483648){b|=2147483648}return(b)}return a}function getRecNo(c,b){if(c&&c.data){var a=c.data._r;if(Ext.isNumber(a)){return a}if(b||Ext.isNumber(b)){a=c.data["_r"+b];if(Ext.isNumber(a)){return a}}}return undefined}function _getrno_(b,a){var c=getRecNo(b,a);if(c==undefined){return -1}return c}function checkFixed(a){if(a.grid){if(Ext.isNumber(a.grid.fxRows)&&(a.rowIdx<a.grid.fxRows)){return(true)}if(Ext.isNumber(a.grid.fxCols)&&(a.colIdx<a.grid.fxCols)){return(true)}}return(false)}function getGridFocused(d){var c=d.view.lastFocused,b,a=c;if(c&&Ext.isNumber(c.rowIdx)){return(c)}if(d.lockedGrid){b=d.lockedGrid.view;c=b.lastFocused}if(c&&Ext.isNumber(c.rowIdx)){a=c;if(c.rowIdx!==b.lastRowIdx){b.lastRowIdx=c.rowIdx;return(c)}}if(d.normalGrid){b=d.normalGrid.view;c=b.lastFocused}if(c&&Ext.isNumber(c.rowIdx)){a=c;if(c.rowIdx!==b.lastRowIdx){b.lastRowIdx=c.rowIdx;return(c)}}return(a)}function _src_(m,l,c,o,k,e,d){var h=null,j=null,b=m.grid,g=null,a;if(l===null){if(b){if(k.length==1){a=k[0];if(a){l=b.store.indexOf(a);if(!Ext.isNumber(l)){l=null}}}if(l==null){g=getGridFocused(b);if(g&&Ext.isNumber(g.rowIdx)){l=g.rowIdx}else{if(k.length){a=k[0]}if(a){l=b.store.indexOf(a);if(!Ext.isNumber(l)){l=null}}}}}}if(l===null){l=-1}c=parseInt(c);if(Ext.isNumber(c)){h=eventDLM+l+eventDLM+c}else{h=eventDLM+l+eventDLM+"NaN"}m.currRow=l&2147483647;if(c){m.currCol=c}try{if(m.grid&&!m.grid.verticalGrid&&Ext.isObject(m.grid.dirtyRow)){if(m.grid.dirtyRow.row!=m.currRow&&m.grid.dirtyRow.rec.dirty){delete m.grid.dirtyRow;if(m.grid.loadDataMask&&m.grid.loadDataMask.uniMask&&m.grid.loadDataMask.uniMask.ldMask){if(d==true){m.grid.maskPending=true}else{m.grid.showMaskCfg(m.grid.loadDataMask.uniMask,true);h=h+eventDLM+"X"}}}}else{if(!d&&m.grid.maskPending){m.grid.maskPending=false;m.grid.showMaskCfg(m.grid.loadDataMask.uniMask,true);h=h+eventDLM+"X"}}}finally{h=h+eventDLM;if(Ext.isArray(k)){var r="",f=null;if(b){if(k.length==1){f=getRecNo(k[0],c)}else{if(!g){g=getGridFocused(b)}if(g){g=g.record}if(!g&&k.length){g=k[k.length-1]}if(g){f=getRecNo(g,c)}}if(f!==null){r=f+","}}Ext.Array.each(k,function(n){var s=getRecNo(n,c);if(n.data&&Ext.isNumber(s)){r+=s+","}});r=r.slice(0,-1);h=h+"["+r+"]"+eventDLM}else{var q=getRecNo(k,c);if(k&&k.data&&Ext.isNumber(q)){h=h+"["+q;if(e===true){h=h+",-1"}h=h+"]"+eventDLM}}m.setValue(h);if(o){m.submittedValue=m.originalValue=h}}}function _sfv_(c,b,a){c.fieldEdited=false;if(c.submitState==b||c.submitState==undefined||b==undefined){if(a!==undefined){c.suspendEvent("change");try{c.setValue(a);c.fireEvent("unichange",c,a);if(c.hasClearButton){c.fireEvent("unicleartoggle",c)}}finally{c.resumeEvent("change")}}if(c.resetOriginalValue){c.resetOriginalValue()}else{c.originalValue=c.getValue()}if(Ext.isDate(c.getValue())){c.lastValue=c.getValue()}else{c.lastValue=(c.getRawValue?c.getRawValue():c.getValue())}c.submittedValue=undefined}else{if(a!==undefined){c.suspendEvent("change");try{c.setValue(a);c.fireEvent("unichange",c,a);if(c.hasClearButton){c.fireEvent("unicleartoggle",c)}}finally{c.resumeEvent("change")}}}}function _rsov_(b,a){if((b.submitState!==undefined)&&(b.submitState<=a)&&(b.submittedValue!==undefined)){if(b.getXTypes&&b.getXTypes().indexOf("checkboxgroup")>0){b.resetOriginalValue();return}b.originalValue=b.submittedValue}}function _asst_(a){if(a&&a.beforeBlur){a.beforeBlur()}return""}function _d_(b){try{if(typeof b=="object"&&b&&b.destroy){b.destroy()}}catch(a){}}function _cls_(a){if(a&&a.boundList){a.boundList.getSelectionModel().selected.clear()}}var __gcinfo__="";function _gci_(){if(__gcinfo__!=""){return(__gcinfo__)}var f=0,e=0,d=0;var c=1,a=0;function g(b){if(b){f|=c}c<<=1}g(Ext.isChrome);g(Ext.isGecko);g(Ext.isIE);g(Ext.isOpera);g(Ext.isSafari);g(Ext.isWebKit);e=f;c=1;f=0;g(Ext.isLinux);g(Ext.isMac);g(Ext.isWindows);d=f;__gcinfo__="br="+e.toString(10)+";os="+d.toString(10)+";";if(Ext.firefoxVersion){a=Ext.firefoxVersion}else{if(Ext.ieVersion){a=Ext.ieVersion}else{if(Ext.chromeVersion){a=Ext.chromeVersion}else{if(Ext.safariVersion){a=Ext.safariVersion}else{if(Ext.webKitVersion){a=Ext.webKitVersion}}}}}if(a===0){if(Ext.isIE9){a=9}else{if(Ext.isIE10){a=10}else{if(Ext.isIE11){a=11}}}}__gcinfo__+=("bv="+a.toString(10));if(Ext.isNumber(window.innerWidth)){__gcinfo__+=(";ww="+window.innerWidth)}if(Ext.isNumber(window.innerHeight)){__gcinfo__+=(";wh="+window.innerHeight)}return(__gcinfo__)}function getColFromIndex(c,a,b){var g=null,f=null;if(a){if(b){var d=a.ownerCt,e=d.ownerCt;if(e&&e.lockedGrid){if(e.columnManager){f=e.columnManager.getColumns()}}}g=f;if(g==null){if(a.getCachedColumns){g=a.getCachedColumns()}}if(g){return g[c]}}return null}function _getsum_(b,h){var g=this;if(b&&b.length){var a=(g&&g.ftotal),k=b[0].store;var e=b[b.length-1].data;var f={};for(key in e){var c="_s";if(a){c="_st"}c=c+key;var j="_s"+key;if(e[c]){f[j]=e[c]}var c="";if(a){c="_sta"}else{c="_sa"}c=c+key;var j="_sa"+key;if(e[c]){f[j]=e[c]}}return f}return null}function _rndexpsum_(f,c,b,g,e,d,a){return _rndsum_(f,null,e,c)}function _rndsum_(value,summaryData,dataIndex,metaData){if(value&&typeof value=="object"){var v=value["_s"+dataIndex],va=value["_sa"+dataIndex],sty=null;if(va){try{eval("var fobj="+va+";")}catch(err){_log(err.message)}if(typeof fobj!="object"){var fobj={}}sty=fobj2style(fobj,false,true)}if(sty&&metaData){metaData.tdAttr=sty}return(v)}return""}function cnv2number(c,a,b){if(typeof c=="number"){return c}if(b!=""){c=c.replace(new RegExp("\\"+b,"g"),"")}c=c.replace(a,".");c=c.replace(/[^\d.-]/g,"");if(c!=""){nval=parseFloat(c);if(Ext.isNumber(nval)){c=nval}}return c}function _rndclldmy_(f,c,b,g,e,d,a){return f}function _rndcll_(g,c,b,j,f,d,a){try{return internalRender(g,c,b,j,f,d,a)}catch(h){return"Render Error: "+h.message}}function _rndECcll_(g,c,b,j,f,d,a){try{return internalRender(g,c,b,j,f,d,a,true)}catch(h){return"Render Error: "+h.message}}function findVirtualCol(c,b){var a=null;Ext.Array.each(c,function(d){if(d.dataIndex==b){a=d;return false}});return a}function setColData(f,e,a){var b=0;if(Ext.isNumber(f)){f=f.toString()}for(var d in e){var c=a.getById(b++);if(c){c.noEvent=true;try{c.set(f,e[d])}finally{c.noEvent=false}}}}function htmlEncode(a){return $("<div/>").text(a).html()}function _dfmt_(d,b){var a=false,c="d/m/Y";if(!b){a=true;b=c}if(b.substr(0,2)=="**"){a=true;b=b.slice(2)}if(b){var e=Ext.Date.format(d,"His");if(e=="000000"){d=Ext.Date.format(d,b)}else{d=Ext.Date.format(d,b+" H:i:s")}}else{d=Ext.Date.format(d,b)}return d}function internalRender(value,metaData,record,rowIndex,colIndex,store,view,colIndexRowEditor){var colAttr="{}",DefColDf="d/m/Y",DefColTf="H:i:s",dVal=null,sty=null,colType="",col=null,extCol=null,colFmt=null,noBg=true,fxCell=false,mstyle="",mcls="",dataIndex=-1,vertGrid=false,recId=null,gg=null;if(store===undefined){return value}gg=store.grid;if(!gg&&store.store){gg=store.store.grid}if(!gg&&store.treeStore){gg=store.treeStore.grid}if(gg){vertGrid=Ext.isArray(gg.dbColumns)}extCol=col=getColFromIndex(colIndex,view,colIndexRowEditor);if(!col){return"ERROR_1"}if(vertGrid){if(col.dataIndex!="l"){var _d=record.data._d;col=findVirtualCol(gg.dbColumns,_d)}}if(!col){return"ERROR_2"}if(extCol){if(value&&Ext.isString(value)&&value[0]=="\004"){value=value.replace(/\004/g,"");if(extCol.uEditor&&extCol.uEditor.store){var st=extCol.uEditor.store,rec=st.findRecord("id",value);if(rec){value=rec.get("val")}}}}if(col.checkColumn){extCol.myview=view;var s="&#160;";if(col.cf&&typeof col.cf=="object"){if(typeof value=="boolean"){s+=col.cf[value]}}var cssPrefix=Ext.baseCSSPrefix,cls=cssPrefix+"grid-checkcolumn "+cssPrefix+"uni-checkcolumn-absolute";if(col.disabled||col.rdonly){metaData.tdCls+=" "+col.disabledCls}if(value){cls+=" "+cssPrefix+"grid-checkcolumn-checked"}cRow=rowIndex;if(vertGrid){recId=record.data._d;cRow=recId}else{recId=record.getId()}var outhtml='<div id="'+store.nm+cRow+"_"+colIndex+'" >';outhtml+='&#160;<span class="'+cls+'" '+((col.checkSelectable===false)||col.rdonly||colIndexRowEditor?"":' onclick="'+extCol.nm+".checkClick(this,"+extCol.nm+","+cRow+","+colIndex+","+recId+');"')+" ></span>";outhtml+='<span class="'+cssPrefix+'uni-checkcolumn-text">'+s+"</span></div>";value=outhtml}dataIndex=col.dataIndex;if(gg){if(col.fxCol){fxCell=true}else{if(gg.fxCols&&(dataIndex<gg.fxCols)){fxCell=true}else{if(gg.fxRows&&(rowIndex<gg.fxRows)){fxCell=true}}}if(gg.xcursor){mstyle+="cursor:"+gg.xcursor+";"}}colAttr=col.attr;if(!colAttr||colAttr==""){colAttr="{}"}if(extCol!=col){if(colAttr=="{}"){colAttr=extCol.attr}}if(!colAttr||colAttr==""){colAttr="{}"}colFmt=col.cf;colType=col.ct;if(!colFmt){colFmt=null}if(!colType){colType=""}var cellAttr=null;if(record.data._x==1){cellAttr=record.data["_"+extCol.dataIndex]}if(cellAttr&&typeof cellAttr=="object"){dVal=cellAttr.d;cellAttr=cellAttr.a}if(!cellAttr||cellAttr==""){cellAttr="{}"}if(cellAttr!="{}"||colAttr!="{}"||extCol.rowHeight){try{eval("var cea="+cellAttr+";")}catch(err){}try{eval("var coa="+colAttr+";")}catch(err){}if(typeof cea!="object"){var cea={}}if(typeof coa!="object"){var coa={}}if(!cea.b){cea.b=coa.b}if(!cea.fc){cea.fc=coa.fc}if(!cea.ft){cea.ft=coa.ft}if(!cea.fts){cea.fts=coa.fts}if(Ext.isNumber(extCol.width)&&extCol.width){cea.w=extCol.width}else{if(extCol.getWidth&&extCol.getEl()){cea.w=extCol.getWidth()}}noBg=!cea.b;cea.h=extCol.rowHeight;sty=fobj2style(cea);if(cea.fs){mstyle+=cea.fs}if(cea.fcls){mcls=cea.fcls}}if(fxCell&&noBg){if(gg.fxColor){mstyle+="background-color:"+gg.fxColor+";"}else{metaData.tdCls="x-theme-color"}}if(mcls){metaData.tdCls=mcls}if(mstyle){metaData.style=mstyle}if(dVal!=null){value=dVal}else{switch(colType){case"":break;case"number":case"float":if(colFmt){var nn=Ext.util.Format.number,isStr=(typeof value=="string");if(isStr){value=value.replace(Ext.util.Format.decimalSeparator,".")}if(colFmt[0]=="$"){colFmt=colFmt.substring(1);if(value<0){value=-value;value="-"+nn(value,colFmt);break}}var nRes=nn(value,colFmt);if(isStr&&nRes==""){break}value=nRes;break}break;case"boolean":if(typeof value=="boolean"){if(colFmt&&typeof colFmt=="object"){value=colFmt[value]}}break;case"datetime":if(value&&value.getDate){value=_dfmt_(value,colFmt)}else{if(value==null){value=""}}break;case"time":if(value&&value.getDate){if(!colFmt){colFmt=DefColTf}value=Ext.Date.format(value,colFmt)}else{if(value==null){value=""}}break;case"date":if(value&&value.getDate){if(!colFmt){colFmt=DefColDf}value=Ext.Date.format(value,colFmt)}else{if(value==null){value=""}}break;default:break}}if(extCol.showQTip){var shw=extCol.showQTipAlways;if(!shw&&extCol.getWidth){var tm=new Ext.util.TextMetrics(),tsize=tm.getSize(value).width+5,w=0;if(extCol.getEl()){w=extCol.getWidth()}else{w=extCol.width}shw=w<tsize;delete tm}if(shw){if(sty==null){sty=" "}if(sty){sty+=" "}sty+='data-qtip="'+value+'"'}}if(sty){metaData.tdAttr=sty}if(extCol.allowHTML===false){value=htmlEncode(value)}return(value)}Ext.override(Ext.picker.Date,{setValue:function(b){var a=this.callParent(arguments);if(this.hfield){this.hfield.setValue(Ext.Date.format(this.getValue(),"dmY"))}return a}});Ext.override(Ext.form.field.Radio,{getModelData:function(){var b={};var a=this.getSubmitValue();if(!a){this.originalValue="\0";return null}if(this.nm){b[this.nm]=a}else{if(this.ownerCt&&this.ownerCt.nm){b[this.ownerCt.nm]=a}else{b[this.name]=a}}return b}});Ext.override(Ext.form.field.ComboBox,{setValue:function(a){if(this.store&&!this.store.data.length){this.store.add({})}this.callParent(arguments)},setRawValue:function(a){if(a=="&nbsp;"){a=""}this.callParent([a])},xlatValName:function(b,a){if(b==a){return(b)}if(b!=="0"&&b!==0){if(b==null||b==""){return(b)}}return("\4"+b+"\4")},getXValue:function(){var a=this.getValue(),b=this.getRawValue();if(this.uniNameValue){return this.xlatValName(a,b)}return(a)},getValue:function(){var a=this.callParent(arguments);if(this.isCellEditor){if(a===null){return("")}}if(this.uniNameValue&&this.uniSendValue){return this.xlatValName(a,this.getRawValue())}return a},iconChange:function(b,d){var a=this.store,e=null;if(d==undefined){d=this.getValue()}if((e=a.findRecord(this.valueField,d,0,false,false,true))===null){this.setFieldStyle(this.rstCss)}else{var c=e.data.icon;if(c.iconUrl){this.setFieldStyle("background-image: url("+c.iconUrl+");background-repeat: no-repeat; background-size: "+this.hasIcon.width+" "+this.hasIcon.height+"; background-position-y: 2px; background-position-x: 2px; padding-left: 25px;")}else{this.setFieldStyle(this.rstCss)}}},initComponent:function(){this.callParent();this.rstCss="background-size: 0px 0px;padding-left: 25px;";if(this.hasIcon){this.on("afterrender",function(){this.iconChange()});this.on("unichange",this.iconChange);this.on("change",this.iconChange)}}});function _sf2me_(a){var a=_gmo_(a);if(a&&a.uform){if(uniVars._actFrm_!=a.uform){uniVars._actFrm_=a.uform;uniVars._actFrm_.uActive=true}a.uform.activeField=a;_sfc_(a)}}Ext.override(Ext.view.BoundList,{getRefItems:function(){var b=this,a=[];if(b.pagingToolbar){a.push(b.pagingToolbar)}if(Ext.isObject(b.loadMask)){a.push(b.loadMask)}return a}});if(Ext.ux.form.MultiSelect){Ext.override(Ext.ux.form.MultiSelect,{uniFocus:function(){_sf2me_(this)},initComponent:function(){var a=this;if(a.hasCheckboxes){var b={listeners:{beforeselect:{fn:function(g,d,e){if(a.checkbusy){return}if(a.checkboxOnly&&a.inUniClick){return false}if(a.selectedItems){var f=a.selectedItems.indexOf(d),c=a.nm+"_chb"+d.data.id;document.getElementById(c).checked=true;if(f<0){a.selectedItems.push(d)}}}},beforecontainerclick:{fn:function(d,c){if(a.checkboxOnly){return false}}},beforedeselect:{fn:function(g,d,e){if(a.checkbusy){return}if(a.checkboxOnly&&a.inUniClick){return false}var c=a.nm+"_chb"+d.data.id;document.getElementById(c).checked=false;var f=a.selectedItems.indexOf(d);if(f>-1){a.selectedItems.splice(f,1)}}},beforeitemclick:{fn:function(g,c,j,f,k){a.inUniClick=true;try{var d=a.listConfig.multiSelect;if(!d){return}if(k.target.type==="checkbox"){a.checkbusy=true;a.inUniClick=false;try{var h=a.selectedItems.indexOf(c);if(h<0){a.selectedItems.push(c)}else{a.selectedItems.splice(h,1)}if(a.selectedItems.length===0){a.boundList.selectionModel.deselectAll()}else{a.boundList.selectionModel.select(a.selectedItems)}}finally{a.checkbusy=false}return false}else{if(a.checkboxOnly){return false}a.selectedItems=[c]}}finally{a.inUniClick=false}}}}};Object.assign(a.listConfig,b)}a.callParent();a.on("change",a.uniFocus,a);a.on("click",a.uniFocus,a)},initCheckItems:function(){var c=this,b=c.nm,a=c.getSelected();c.selectedItems=[];Ext.Array.each(a,function(e){var d=b+"_chb"+e.data.id;c.selectedItems.push(e);document.getElementById(d).checked=true})},uniScroll:function(c){var b=this,d=b.boundList.getSelectedNodes();if(d.length){var a=d[0];if(a){if(a.scrollIntoViewIfNeeded){a.scrollIntoViewIfNeeded(c)}else{if(a.scrollIntoView){try{if(c){a.scrollIntoView({block:"center"})}else{a.scrollIntoView({block:"end"})}}catch(f){_log(f.message);_log("Calling: scrollIntoView()");a.scrollIntoView(c)}}}}}},on:function(a,d,c,b){if(a=="keypress"||a=="keydown"||a=="keyup"){if(this.bodyEl){return this.bodyEl.on(a,d,this,b)}}return this.callParent(arguments)}})}Ext.override(Ext.grid.RowEditor,{reconfigRowEditor:function(){var a=this.getRefOwner(),b=a.getColumns();this.suspendLayouts();try{if(Ext.isArray(b)){Ext.Array.each(b,function(f){var d=f.getEditor();if(d&&d.setWidth){d.setX(f.getX()+1);d.setWidth(f.getWidth()-2)}})}}finally{this.resumeLayouts()}},reposition:function(b,a){this.callParent(arguments);if(this.reconfiged){this.reconfiged=false;this.reconfigRowEditor()}}});Ext.override(Ext.panel.Table,{discardColumns:function(){if(this.getColumnManager){var a=this.getColumnManager().getColumns();Ext.Array.each(a,function(b){b.discarded=true})}},reconfigure:function(k,d,f){var c=null;if(!this.lockedGrid){if(this.uform){var j=this.getView(),b=j.getEl();if(b){c=b.dom.scrollLeft}}}if(this.selModel&&this.selModel.deselectAll){try{this.selModel.deselectAll(true)}catch(g){_log("reconfigure:deselectAll(), "+g.message)}}this.callParent(arguments);var h=this.getColumnManager().getColumns();h.forEach(function(e,m){var n=e.getEl(),l=this;if(e.fedit&&n){n.addListener("mousedown",function(){if(l.getX()<e.fedit.focusEl.getX()){e.fedit.focusEl.focus()}})}},this);if(c){b.dom.scrollLeft=c;this.headerCt.el.dom.scrollLeft=c}var a=this.getPlugin("uniGridEditor");if(a&&a.isRowEditor){if(a.editor){a.editor.reconfiged=true}}},uniConfigColumns:function(){var a=this;if(this.lockedGrid){if(this.lockedGrid.view&&this.lockedGrid.view.getCachedColumns){this.lockedGrid.view.getCachedColumns(true)}}if(this.normalGrid){if(this.normalGrid.view&&this.normalGrid.view.getCachedColumns){this.normalGrid.view.getCachedColumns(true)}}if(this.view&&this.view.getCachedColumns){this.view.getCachedColumns(true)}}});Ext.override(Ext.grid.Panel,{bPlugin:null,initComponent:function(){var a=this;a.callParent();a.addListener("afterrender",a.checkRender,a)},checkRender:function(){var a=this;if(a.pendingPos){_gsc_(a.cellModel,a.pendingPos.row,a.pendingPos.column);delete a.pendingPos}},on:function(b,e,d,c){if(b=="keypress"||b=="keydown"||b=="keyup"){var a=this.getView();if(a){return a.addElListener(b,e,a,c)}}return this.callParent(arguments)},loadX:function(b,c,a){if(this.store.getCount()==0){this.store.load({params:{start:b,options:a}})}else{if(!this.bPlugin){this.bPlugin=this.getPlugin("bufferRenderer")}if(this.bPlugin){this.bPlugin.scrollTo(b,c)}}},skipMe:function(){var a=this;if(a.store&&a.store.getCount()==0){return true}return false},focus:function(){var a=this;if(a.store){if(a.store.getCount()>0){a.callParent(arguments);_sf2me_(a)}}},doKeyNav:function(a){var b=uniVars._actCnt;if(!a){if(b==this){uniSyncObj._globalKbEn=false}if(this.selModel&&this.selModel.keyNav){this.selModel.keyNav.disable()}}else{uniSyncObj._globalKbEn=true;if(this.selModel&&this.selModel.keyNav){this.selModel.keyNav.enable()}}},disableEdit:function(a){if(a){if(!this.rdonly){this.rden=true;this.rdonly=true}}else{if(this.rden==true){this.rden=false;this.rdonly=false}}},showMask:function(c,b,a){this.disableEdit(true);this.doKeyNav(false);this.callParent(arguments)},showMaskCfg:function(a,b){this.disableEdit(true);this.doKeyNav(false);this.callParent(arguments)},hideMask:function(a){try{this.callParent(arguments)}finally{this.disableEdit(false);this.doKeyNav(true)}}});function gridLoadCallback(){if(this.grid){var b=this.grid;if(b.hidField){b.hidField.setValue("");b.hidField.resetOriginalValue()}if(b.rtl&&!b.lockedGrid){Ext.defer(function(){var e=this.getView().getEl();if(e){e.dom.scrollLeft=e.dom.scrollWidth;this.headerCt.el.dom.scrollLeft=e.dom.scrollLeft}},1,this.grid)}this.grid.focusDisabled=false;if(this.grid.selModel){this.grid.selModel.lastSelectedRec=null;if(this.grid.selModel.resumeEvents){if(this.grid.selModel.isSuspended()){this.grid.selModel.resumeEvents()}}}}var a=uniVars._maskObjs;if(a.length){for(var c=a.length-1;c>=0;c--){var f=a[c];if(f){if(f.c){f.c--}if(f.c==0){try{if(f.u){f.maskActive=false;try{f.u.hide();f.u.destroy()}catch(d){_log(d.message);_log(f)}}}finally{a.splice(c,1)}}}}}}function dispGridMask(d){var c=d;if(c.dbgrid){if(c.grid){c.grid.focusDisabled=true;if(c.grid.loadDataMask&&c.grid.loadDataMask.uniMask&&c.grid.loadDataMask.uniMask.ldMask){c.grid.showMaskCfg(c.grid.loadDataMask.uniMask,true)}if(c.grid.selModel&&c.grid.selModel.suspendEvents){if(!c.grid.selModel.isSuspended()){c.grid.selModel.suspendEvents(false)}}if(c.grid.verticalGrid){c.grid.refreshColumnCache=true}}if(!c.proxy||c.proxy.type!="ajax"){return}if(c.hasUniListener!==true){c.hasUniListener=true;c.addListener("load",gridLoadCallback,c);c.addListener("prefetch",gridLoadCallback,c)}var a=uniVars._maskObjs;if(a.length){for(var b=a.length-1;b>=0;b--){var e=a[b];if(e.cf&&e.cf.maskWaitData){if(e.u){e.u.mustWaitData=true}e.c++}}}}}Ext.override(Ext.data.BufferedStore,{prefetch:function(){var a=this;try{dispGridMask(a)}finally{a.callParent(arguments)}}});Ext.override(Ext.data.Store,{doDestroy:function(){this.grid=null;this.callParent(arguments)},removeAtSilent:function(a,b){this.suspendEvent("selectionchange");try{this.removeAt.apply(this,arguments)}finally{this.resumeEvent("selectionchange")}},load:function(){var a=this;try{dispGridMask(a)}finally{a.callParent(arguments)}}});Ext.override(Ext.grid.View,{initComponent:function(){var a=this;a.callParent();function b(d){if(d){var e=d.ownerCt;if(e){if(e.nm){return(e)}e=e.ownerCt;if(e&&e.nm){return(e)}}}}a.on("itemkeydown",function(){_sf2me_(b(this))});a.on("itemmousedown",function(){_sf2me_(b(this))})}});Ext.override(Ext.grid.plugin.HeaderResizer,{afterHeaderRender:function(){this.callParent(arguments);if(this.tracker){this.tracker.constrainModes.point=this.point}},point:function(b,d){var c=b.dragRegion,a=b.getConstrainRegion();if(!a){return d}c.x=c.left=c[0]=c.right=d[0];c.y=c.top=c[1]=c.bottom=d[1];return[c.left,c.top]}});function handleGridTabKey(c,b,j,f){if(c!=9){return false}if(b.isXType&&b.isXType("grid")){var d=b.getPlugin("uniGridEditor");if(d&&d.editing){return true}if(b.selModel&&b.selModel.uname=="cellModel"){if(j){if(b.tkNextCmp!==true){var a=b.selModel.navigationModel;if(a){j.shiftKey=false;var h=a.getPosition();if(!h){return true}var g={r:h.rowIdx,c:h.colIdx};if(f){a.onKeyLeft(j)}else{a.onKeyRight(j)}h=a.getPosition();if(h.rowIdx==g.r&&h.colIdx==g.c){return false}else{return true}}}}return true}}return false}Ext.override(Ext.view.View,{onItemKeyDown:function(a,f,c,g,d){this.callParent(arguments);var b=g.getKey();_prkeyd_(this.grid,"text",b,_pss_(g),false,null,false,g)}});Ext.override(Ext.view.Table,{getOwnerGrid:function(){var b=this;var a=b.ownerCt;if(a){if(!a.nm){a=a.ownerCt}if(a.nm){return a}}return null},doDestroy:function(){var a=this;a.cachedColumns=null;a.callParent()},getCachedColumns:function(a){if(!a){var c=this.getOwnerGrid();if(c){a=c.refreshColumnCache;c.refreshColumnCache=false}}if(a){delete this.cachedColumns}if(this.cachedColumns){return this.cachedColumns}else{var b=this.ownerCt;if(b.getColumnManager){this.cachedColumns=b.getColumnManager().getColumns()}else{this.cachedColumns=this.getGridColumns()}return this.cachedColumns}},getGridColumns:function(){delete this.cachedColumns;return this.callParent(arguments)},focusCell:function(){var b=this;var a=this.getOwnerGrid();if(a){if(uniVars._actCnt&&uniVars._actCnt!=a){return b}}return b.callParent(arguments)}});function _trnd_(k,b,c,g,m,l,h){var f=c.data;if(f){var e=l.ownerTree;if(e){if(!f.fc){f.fc=e.fc}if(!f.fts){f.fts=e.fts}}if(f.fc||f.ft||f.fts){var j='style="';if(f.fc){j+="color:"+f.fc+";"}if(f.ft){j+="font:"+f.ft+";"}if(f.fts){j+=f.fts+";"}b.tdAttr=j+'"'}}return(k)}function _htnr_(a,c,d,b){d.ui._pr=d.ui.render;d.ui.render=function(f){this._pr(f);var g=this.getTextEl();var e=this.node.attributes;if(g){if(!e._fcl){e._fcl=a._fcl}if(!e._fn){e._fn=a._fn}g.style.color=e._fcl;g.style.font=e._fn}}}function selectTreeMenuNode(a,b){a.suspendEvent("selectionchange");try{a.setSelection(b)}finally{a.resumeEvent("selectionchange")}}function _stn_(a,d){if(d===null){var c=null}else{var c=a.getRootNode().findChild("id",d,true)}var e=a.selModel,b=a.frmhidden;if(b){b.setValue(d);b.submittedValue=b.originalValue=d}if(e){e.suspendEvent("selectionchange");try{if(c===null){e.deselectAll()}else{e.select(c);a.ensureVisible(d)}}finally{e.resumeEvent("selectionchange")}}}function _mvn_(a,e,c,g){var b=a.getStore(),f=b.getNodeById(e),d;if(c!=-1){d=b.getNodeById(c)}else{d=b.getRoot()}if(d&&f){f.remove();switch(g){case"add":case"addChild":d.insertBefore(f,null);break;case"addFirst":case"addChildFirst":d.insertChild(0,f);break}}}function _snatr_(b,c,a,e){var d=b.getStore().getNodeById(c);if(d){d.set(a,e);d.commit()}}function _srd_(b,f,c,e,a){var d=b.getAt(f,true);if(d){if(e===null){d.data=[" "]}else{d.set(c,e);d.set("_"+c,a);if(a!=""){d.set("_x",1)}}d.commit()}}function _axy_(d){var a=false;if(d&&d.getPosition){var c=d.getPosition();if(c[0]<0){a=true;c[0]=0}if(c[1]<0){a=true;c[1]=0}if(a){d.setPosition(c[0],c[1])}}}function _gcdi_(a,c,d){var g=null;try{if(a.getCachedColumns){g=a.getCachedColumns()}else{if(a.getPosition){a=a.getPosition()}}if(g==null){if(a.view&&a.view.getCachedColumns){g=a.view.getCachedColumns()}}if(g&&g.length){if(!d){for(i=0;i<g.length;i++){var b=g[i];if(b.isVisible()&&b.getVisibleIndex()==c){return parseInt(b.dataIndex)}}}return parseInt(g[c].dataIndex)}return c}catch(f){alert(f.message+" colix: "+c)}}function _ccell_(d){var c=d,a=c.selection,b=c.grid;if(!a){a=c.nextSelection}if(a&&b){if(a.rowIdx===b.uniRow&&a.colIdx===b.uniCol){return true}b.uniRow=a.rowIdx;b.uniCol=a.colIdx}return false}function _fccp_(e,b,h,k){function j(o,n,l,m){var g=false;if(o){Ext.Array.each(o,function(q){if(q.dataIndex!=""&&q.dataIndex==n){g=true;if(l){if(q.getVisibleIndex){l.index=q.getVisibleIndex()}else{l.index=o.indexOf(q)}l.column=q;l.grid=m}return false}})}return g}var a=[e,e.normalGrid,e.lockedGrid],f=false;if(k){if(e.getColumnManager){c=e.getColumnManager().getColumns()}else{c=e.getGridColumns()}f=j(c,b,h,e);if(f){return true}}else{for(var d=0;d<a.length;d++){if(a[d]&&a[d].view&&a[d].view.getCachedColumns){var c=a[d].view.getCachedColumns();f=j(c,b,h,a[d]);if(f){return true}}}}return false}function _hge_(a){p=a.getPlugin("uniGridEditor");if(p&&p.editor){p.editor.canhide=true;p.editor.hide()}}function _ggp_(c,b,a,e){var d=null;if(_fccp_(c,b,a,e)){d=a.grid.getPlugin("uniGridEditor")}if(!d){if(_fccp_(c,b,a,true)){d=a.grid.getPlugin("uniGridEditor")}}return d}function _cgms_(a){if(a.maskActive){a.hideMask(true)}}function _cgre_(a,b){var c=a.getPlugin("uniGridEditor");if(c&&c.cancelEdit){if(b){c.suspendEvent("canceledit")}try{c.cancelEdit()}finally{if(b){c.resumeEvent("canceledit")}}}}function _sge_(f,n,c,m){var b=uniVars._actCnt,h={},k=b&&b.isXType&&b.isXType("grid"),l=b&&(k||b.isFormField),j=n;var e=uniVars._actFrm_;if(!k&&b){k=b.verticalGrid}if(f.notSynced){j=f.store.getAt(n,true)}if(e&&f.uform&&(f.uform!==e)){return}if(f.selModel&&f.selModel.isRowModel){_gsr_(f.selModel,j)}if(!l||b==f){uniVars._actCnt=f;var a=_ggp_(f,c,h,m);if(a){if(f.store.getNodeById){var d=f.store.getNodeById(n);if(d&&d.isVisible()){a.startEdit(j,h.column)}}else{a.startEdit(j,h.column)}}}else{if(!k&&b&&b.focus){b.focus()}}}function _shf_(a){a.uniAlreadyFocused=true}function _expnd_(a,c){if(c.data.id&&a.getNodeById){var b=a.getNodeById(c.data.id);if(b){b.expand()}}}function _flc_(){var a=uniVars._actCnt;if(a&&a.uniAlreadyFocused){a.uniAlreadyFocused=false;return}if(a&&a.uform&&a.uform.uActive==true){if(a.focus){a.focus()}}}function refreshView(b){var a=b.getView();if(a){if(a.bufferedRenderer){if(a.bufferedRenderer.refreshView){a.bufferedRenderer.refreshView()}}else{a.refresh()}}}function _gsc_(c,n,b,l){if(c.setCurrentPosition){try{if(n==undefined){c.setCurrentPosition()}else{var j={};if(_fccp_(c.grid,b,j)){b=j.index}try{if(c.grid&&!c.grid.rendered){c.grid.pendingPos={row:n,column:b}}else{var a=c.lastSelectedRec;if(!a||(a.row===n&&a.column===b)){try{c.deselectAll(true)}catch(k){}}c.lastSelectedRec={row:n,column:b};if(c.grid.notSynced===true){var d=c.grid.store.getAt(n,true);if(d){c.suspendEvent("select");try{c.select({row:d,column:b})}finally{c.resumeEvent("select")}}}else{var f=c.grid;c.setPosition(c.lastSelectedRec,true);if(!l){if(f.lockedGrid){refreshView(f.lockedGrid)}else{refreshView(f)}}var h=c.lastSelectedRec.row;f.ensureVisible(h);if(f.uform&&f.uform.uActive==true){var m=c.getPosition();f.getView().focusCell(m)}}}}catch(k){Ext.Msg.show({title:"Error",msg:"Could not set cell position: row: ["+n+"], column:["+b+"] :"+k.message,buttons:Ext.MessageBox.OK})}}}finally{if(c.grid){c.grid.focusDisabled=false;c.grid.uniRow=n;c.grid.uniCol=b;if(c.grid.hidField){_src_(c.grid.hidField,n,b,true)}}}}if(n!=undefined){_flc_()}}function _gsr_(j,h,b,a){var c=j.grid;try{_ssevt_(j,"selectionchange",true);try{j.select(h);if(a&&c){if(!c.hasRowWidget){refreshView(c)}c.ensureVisible(h)}if(c.uform&&c.uform.uActive==true){var f=j.getCurrentPosition();if(Ext.isNumber(b)){if(f){f.colIdx=b}}c.getView().focusCell(f)}}finally{_ssevt_(j,"selectionchange",false);if(c){c.focusDisabled=false;if(c.hidField){_src_(c.hidField,h,null,true)}}}}catch(d){Ext.Msg.show({title:"Error",msg:"Could not set row position: row: ["+h+"] :"+d.message,buttons:Ext.MessageBox.OK})}if(h!=undefined){_flc_()}}function _cge_(b){var a;if(b.selModel){b=b.selModel}if(b&&b.grid){if(b.grid.plugins){a=b.grid.getPlugin("uniGridEditor");if(a&&a.editing&&!a.isRowEditor){a.completeEdit()}return}if(b.grid.lockedGrid&&b.grid.lockedGrid.plugins){a=b.grid.lockedGrid.getPlugin("uniGridEditor");if(a&&a.editing&&!a.isRowEditor){a.completeEdit()}}if(b.grid.normalGrid&&b.grid.normalGrid.plugins){a=b.grid.normalGrid.getPlugin("uniGridEditor");if(a&&a.editing&&!a.isRowEditor){a.completeEdit()}}}}Ext.override(Ext.grid.column.Column,{checkColumn:false,doDestroy:function(){var a=this;a.callParent();a.editor=null;a.ogrid=null},checkClick:function(sender,col,rr,cc,recId){if(typeof this.ogrid=="string"){this.ogrid=eval(this.ogrid)}var gg=this.ogrid;if(gg&&gg.dirtyRow){if(gg.dirtyRow.row!=rr){return false}}if(typeof cc=="string"){cc=parseInt(cc)}var record=this.ogrid.store.getById(recId),cb=!record.get(this.dataIndex);record.set(this.dataIndex,cb);if(!this.stopSelection&&col&&col.myview){var sl=col.myview.selModel;if(sl){if(sl.isRowModel){sl.select([record])}else{sl.select({row:record,column:cc})}}}var e={grid:this.ogrid,record:record,value:cb,originalValue:!cb,rowIdx:rr+2147483648,colIdx:cc,column:this};this.ogrid.fireEvent("cellclick",this.ogrid,null,this.dataIndex,e.record,null,e.rowIdx);this.ogrid.fireEvent("edit",this.ogrid,e);return true}});Ext.define("Ext.grid.column.vertColumn",{extend:"Ext.grid.column.Column",vertCol:true,getEditor:function(a){var d=this.ogrid,b=a.data._d,e=this,f=null;var h=findVirtualCol(d.dbColumns,b);if(h){if(h.rdonly||h.unEditable){return null}f=h.editor;if(!(f instanceof Ext.grid.CellEditor)){var g=new Ext.grid.CellEditor({field:f});f=g;f.editorId="idx_"+h.nm;h.editor=f}}return f}});function _ce_(f){var h=f.column;if(h){var d=h.ogrid;if(h.checkColumn){return false}if(h.vertCol){var b=f.record,a=null;if(b&&d){a=findVirtualCol(d.dbColumns,b.data._d)}if(a&&a.rdonly){return false}if(d&&d.rdonly){return false}}else{var b=f.record;if(b.data._nd===true){return false}if(h&&h.rdonly){return false}if(d&&d.rdonly){return false}}}return true}function cmpRecs(e,d,f){var c=false;if(e&&d){for(var g in e){if(g==f.dataIndex){var j=e[g],h=d[g];if(j===h){return true}if(Ext.isNumber(j)||Ext.isNumber(h)){if(Ext.isNumber(j)&&Ext.isNumber(h)){return j==h}else{if(Ext.isNumber(j)){if(f.cf){j=Ext.util.Format.number(j,f.cf)}else{j=j.toString()}j=j.replace(Ext.util.Format.decimalSeparator,".")}if(Ext.isNumber(h)){if(f.cf){h=Ext.util.Format.number(h,f.cf)}else{h=h.toString()}h=h.replace(Ext.util.Format.decimalSeparator,".")}c=(j==h);if(c){return true}}}else{if(Ext.isDate(j)||Ext.isDate(h)){if(Ext.isDate(j)){if(f.cf){j=_dfmt_(j,f.cf)}else{j=j.toString()}}if(Ext.isDate(h)){if(f.cf){h=_dfmt_(h,f.cf)}else{h=h.toString()}}c=(j==h);if(c){return true}}else{if(Ext.isBoolean(j)||Ext.isBoolean(h)){if(Ext.isBoolean(j)){j=j.toString()}if(Ext.isBoolean(h)){h=h.toString()}c=(j==h);if(c){return true}}else{if(j==null){j=""}if(h==null){h=""}c=(j==h);if(c){return true}}}}return false}}}return true}function _ae_(d){if(d.record&&d.record.dirty){var c=d.grid;if(c&&c.hidField==undefined){c=c.ownerCt}var b=true;if(b||d.column.checkColumn){if(c&&c.hidField&&!c.verticalGrid){var a=cmpRecs(d.record.modified,d.record.data,d.column);if(!a){c.dirtyRow={row:c.hidField.currRow,rec:d.record}}else{d.originalValue=d.value}}}}}function is_input(a){return(a=="text")||(a=="textarea")||(a=="submit")||(a=="password")||(a=="email")||(a=="date")||(a=="datetime-local")||(a=="month")||(a=="number")||(a=="search")||(a=="tel")||(a=="time")||(a=="url")||(a=="week")}function is_readonly(a){if(a){return(a.readOnly)}return false}function _keyMon_(b,j,c){var e=null;var k=uniVars._actFrm_;var d=false;if(k&&k.mKeys&&k.mKeys.e){e=k.mKeys}else{e=uniVars.mKeys}if(e&&e.e){if(e.ea){j.h=(e.ha!==false);d=true}for(var f=0;f<e.a.length;f++){var l=e.a[f];if(c){var g=l.cs;var h=l.ce}else{var g=l.ks;var h=l.ke}if(!h){h=g}if(g&&h){if(b>=g&&b<=h){j.h=(l.h!==false);return true}}}return d}return true}function _prkeyd_(d,s,j,u,g,c,h,l){var n={h:true};var m=h&&(j==9);if(uniSyncObj._globalKbEn===false){return false}if(uniVars._actFrm_){var q=uniVars._actFrm_;if(q.keyprv||!is_input(s)){if(_keyMon_(j,n)){if(g){q.fireEvent("keyup",uniVars._actFrm_,j,u)}else{q.fireEvent("keydown",uniVars._actFrm_,j,u)}}}if(!g){var b=null;if(q.gNavigate&&q.gNavigate.e){b=q.gNavigate}else{b=uniVars.gNavigate}if(b&&(m||b.e)){if(b.gs&&j==b.gs.k&&u==b.gs.s){q.fireEvent("submit",uniVars._actFrm_);if(b.gs.h!==true){return false}else{return true}}else{if(b.gc&&j==b.gc.k&&u==b.gc.s){q.fireEvent("cancel",uniVars._actFrm_);if(b.gc.h!==true){return false}else{return true}}}var r=d;if(!r||!r.nm){r=q.activeField}if(r){var k=r;if(k.focusDisabled!==true){if((m||b.t)&&j==9&&u==0){var o=true}else{if((m||b.t)&&j==9&&u==1){var a=true}}if(a||b.gp&&j==b.gp.k&&u==b.gp.s){if(handleGridTabKey(j,k,l,true)){return false}if(l){l.stopEvent()}if(k.uniSelectNext(k,false,b.c,b.st)===false){return true}if(a||b.gp.h!==true){return false}}else{if(o||b.gn&&j==b.gn.k&&u==b.gn.s){if(handleGridTabKey(j,k,l,false)){return false}if(l){l.stopEvent()}if(k.uniSelectNext(k,true,b.c,b.st)===false){return true}if(o||b.gn.h!==true){return false}}}}}}}}if(uniVars._docKeys_.all){return false}if(uniVars._docKeys_.tab&&j==9){return false}if(uniVars._docKeys_.ESC&&j==27){return false}if(uniVars._docKeys_.F5&&j==116){return false}if(uniVars._docKeys_.BS&&j==8){if(is_readonly(c)){return false}if(!is_input(s)){return false}}if(n.h!==true){return false}return true}function _ctu_(a,c){var b=String.fromCharCode(a);if(c){encoder=encodeURIComponent;return(encoder(b))}else{return b}}function _gkp_(b,a){if(b&&b.getCharCode){return(_ctu_(b.getCharCode(),true))}if(a&&a.getCharCode){return(_ctu_(a.getCharCode(),true))}return null}function _prkeyp_(c,d){var b={h:true};if(uniVars._actFrm_){if(uniVars._actFrm_.keyprv||!is_input(c)){var a=_ctu_(d);if(_keyMon_(a,b,true)){uniVars._actFrm_.fireEvent("keypress",uniVars._actFrm_,_ctu_(d,true))}}}if(b.h!==true){return false}return true}function _cwk_(){document.oncontextmenu=function(){if(uniVars._docKeys_.rClick){return false}return true};if(typeof window.event!="undefined"){document.onkeydown=function(d){d=d||window.event;if(!d){_log("onkeydown: e is not defined");return false}var c=d.srcElement,b=c.type,a=d.keyCode;return _prkeyd_(null,b,a,_pss_(d),false,c)};document.onkeypress=function(b){b=b||window.event;if(!b){_log("onkeypress: e is not defined");return false}var c=b.keyCode,a=b.srcElement.type;return _prkeyp_(a,c)};document.onkeyup=function(d){d=d||window.event;if(!d){_log("onkeyup: e is not defined");return false}var c=d.srcElement,b=c.type,a=d.keyCode;return _prkeyd_(null,b,a,_pss_(d),true,c)}}else{document.onkeydown=function(d){var c=d.target;var b=c.type;var a=d.keyCode;return _prkeyd_(null,b,a,_pss_(d),false,c)};document.onkeypress=function(c){var b=c.target;var d=c.charCode||c.keyCode;var a=b.type;return _prkeyp_(a,d)};document.onkeyup=function(d){var c=d.target;var b=c.type;var a=d.keyCode;return _prkeyd_(null,b,a,_pss_(d),true,c)}}}function _dko_(a){if(a){uniVars._docKeys_=a}}function _sdf_(a){if(a&&a.uform){a.uform.uActive=false;if(uniVars._actFrm_==a.uform){uniVars._actFrm_=uniVars._mFrm_}}}function _saf_(a){if(a&&a.uform){uniVars._actFrm_=a.uform;uniVars._actFrm_.uActive=true}}function _sdrg_(b,a){if(b.dd){if(a){if(b.dd.enable){b.dd.enable()}else{if(b.dd.unlock){b.dd.unlock()}}}else{if(b.dd.disable){b.dd.disable()}else{if(b.dd.lock){b.dd.lock()}}}}}Ext.define("Ext.uni.Splitter",{extend:"Ext.container.Container",orientation:"",minSize:0,maxSize:0,monitorUniEvents:true,_down:false,_moved:false,_vert:false,overlayCls:Ext.baseCSSPrefix+"resizable-overlay",initComponent:function(){this.callParent(arguments);if(this.orientation=="n"||this.orientation=="s"){this._vert=true}},getNewPos:function(a,g){var c=null;if(this.ownerCt){var f=this.ownerCt.getPosition();if(this._vert){c=g-f[1]}else{c=a-f[0]}var b=this.minSize;if(this.orientation=="w"){b=this.ownerCt.getWidth()-b;if(c>b){c=b}}else{if(this.orientation=="n"){b=this.ownerCt.getHeight()-b;if(c>b){c=b}}else{if(c<b){c=b}else{if(this._vert){var d=this.ownerCt.getHeight()-5;if(c>d){c=d}}else{var e=this.ownerCt.getWidth()-5;if(c>e){c=e}}}}}if(c<0){c=0}}return(c)},setHandlePos:function(b){var a=this.ownerCt.getPosition();if(this._vert){this.hhandle.setY(b+a[1]-1)}else{this.hhandle.setX(b+a[0]-1)}},setNewPos:function(a){if(this._vert){this.setPosition(undefined,a)}else{this.setPosition(a)}},createDragOverlay:function(){var a,b=Ext.dom.Element;a=this.overlay=Ext.getBody().createChild({role:"presentation",cls:this.overlayCls,html:"&#160;"});a.unselectable();a.setSize(b.getDocumentWidth(),b.getDocumentHeight());a.dom.style.cursor=this.el.dom.style.cursor;a.show()},createDragHandle:function(){var a;a=this.hhandle=Ext.getBody().createChild({html:"&#160;"});a.unselectable();if(this._vert){a.setSize(this.getWidth(),this.getHeight()+2)}else{a.setSize(this.getWidth()+2,this.getHeight())}var b=this.getPosition();a.setXY(b);a.addCls([Ext.baseCSSPrefix+"abs-layout-item",Ext.baseCSSPrefix+"splitter",Ext.baseCSSPrefix+"splitter-active"]);a.dom.style.zIndex=1000000;a.show()},dragMove:function(a,c){if(this.getXType){if(!this._moved){this.createDragHandle()}this._moved=true;var b=this.getNewPos(a,c);if(b!==null){this.setHandlePos(b)}}},dragEnd:function(a,e){var d=this;Ext.getDoc().un({scope:d,capture:true,mouseup:d.mmUp,mousemove:d.mmMove});if(d.overlay){d.overlay.remove();delete d.overlay}if(d.hhandle){d.hhandle.remove();delete d.hhandle}if(d.getXType&&d._moved&&d._down){var c=d.getNewPos(a,e);if(c!==null){if(d.rtl&&!d._vert){var b=this.ownerCt.getWidth();c=b-c}d.setNewPos(c);d.fireEvent("moved",d,c)}}},mmUp:function(a){a.preventDefault();a.stopPropagation();try{var b=a.getXY(a);this.dragEnd(b[0],b[1])}finally{this._moved=false;this._down=false}},mmMove:function(a){a.preventDefault();a.stopPropagation();if(this.getXType&&this._down){var b=a.getXY(a);this.dragMove(b[0],b[1])}},do_mousedown:function(e,c,f,a){var d=this;e.preventDefault();e.stopPropagation();if(!d._down){d._down=true;d.createDragOverlay();Ext.getDoc().on({scope:d,capture:true,mouseup:d.mmUp,mousemove:d.mmMove})}}});Ext.define("Ext.panel.HTML",{extend:"Ext.panel.Panel",first:true,update:function(){this.callParent(arguments);if(this.first&&this.rendered){this.first=false;var a=this.getSize();if(a.width&&a.height){this.setSize(a.width-1,a.height-1);a=this.getSize();this.setSize(a.width+1,a.height+1)}}this.fireEvent("afterupdatehtml",this)}});Ext.override(Ext.container.Container,{addDocked:function(a,b){_log("TUniContainerPanel.addDocked(): Capability not implemented. Use TUniPanel or TUniSimplePanel instead.")}});Ext.override(Ext.form.field.Base,{onChange:function(){this.callParent(arguments);var a=_gmo_(this);if(a.isFormField){if(a.isSuspended&&!a.isSuspended("change")){_hed_(a)}}},getErrors:function(b){var a=this,d=a.callParent(arguments),c=a.getValue();if(a.uniFmtObj){if(a.minValue!==undefined){if(c<a.minValue){d.push("-")}}if(a.maxValue!==undefined){if(c>a.maxValue){d.push("+")}}}return d},isDirty:function(){var a=this;if(a.isFilter===true&&a.ownerCt.isHidden()){return false}return a.callParent(arguments)},getValue:function(){var a=this,b;b=a.callParent(arguments);if(a.uniFmtObj){b=cnv2number(b,a.uniFmtObj.aDec,a.uniFmtObj.aSep)}return b},updateNumericFormat:function(b){var a=this;if(a.uniFmtObj){a.uniFmtObj=b;$("#"+a.id+"-inputEl").autoNumeric("update",a.uniFmtObj)}},setValue:function(b){var a=this;a.callParent(arguments);if(a.uniFmtObj){$("#"+a.id+"-inputEl").autoNumeric("set",b)}return a},uniOnChange:function(){var c=this,a=c.lastValue,b=null;if(Ext.isDate(a)){b=c.getValue()}else{b=(c.getRawValue?c.getRawValue():c.getValue())}if(!c.isEqual(b,a)&&!c.destroyed){_hed_(this)}},addManagedListener:function(f,b,d,c,a,g){var e=this;this.callParent(arguments);if(typeof b=="object"){return}if(e.nm&&d==e.onChangeEvent){e.onChangeEventHooked=true;if(b!="propertychange"){e.addManagedListener(f,b,e.uniOnChange,this)}}}});Ext.override(Ext.tree.Panel,{focus:function(){return this.callParent(arguments)}});Ext.override(Ext.data.TreeStore,{getAt:function(a,c){var b=this;if(c===true){return b.getNodeById(a)}else{return this.callParent(arguments)}}});Ext.override(Ext.form.RadioGroup,{setValue:function(b){if(Ext.isObject(b)){for(var a in b){if(b[a]==-1){Ext.Array.each(this.items.items,function(c){c.setValue(false)});return this}break}}return this.callParent(arguments)},skipMe:function(){var a=this;if(a.items&&!a.items.items.length){return true}return false},focus:function(d,a,e,b){var c=this;if(c.items&&c.items.items.length&&c.items.items[0].focus){c.items.items[0].focus(d,a,e,b)}else{return c.callParent()}}});Ext.override(Ext.form.field.HtmlEditor,{cTask:null,onChange:function(){this.callParent(arguments);if(this.isSuspended&&!this.isSuspended("change")){_hed_(this)}},setValue:function(a){this.callParent(arguments)},checkChange:function(a){if(a===true||this.checkChangeBuffer==undefined){this.callParent();return}if(this.cTask==null){this.cTask=new Ext.util.DelayedTask(function(){this.checkChange(true)},this)}this.cTask.delay(this.checkChangeBuffer)}});Ext.override(Ext.menu.Item,{setIcon:function(b){var a=this.iconEl,c=this.icon;if(a){a.dom.src=b||Ext.BLANK_IMAGE_URL}this.icon=b;this.fireEvent("iconchange",this,c,b)}});Ext.override(Ext.Component,{uniAfterCreate:function(){this.elArray=[];if(!this.uniHasEvent){this.uniHasEvent=[]}this.uniCheckEvent("mouseover");this.uniCheckEvent("mouseout");this.uniCheckEvent("mousedown");this.uniCheckEvent("mouseup");this.uniCheckEvent("mousemove");this.uniCheckEvent("click");this.uniCheckEvent("dblclick");this.__X=-1;this.__Y=-1},uniCheckEvent:function(a){if(this.events[a]===true){this.uniHasEvent[a]=true}},uniSelectFirst:function(a){return this.uniSelectNext(undefined,undefined,undefined,a)},uniSelectNext:function(a,v,l,o){if(this.uform){var u=this.uform,s=0,y=-1,j=-1,q=-1,k=-1,b=-1,t=1000000,g="",e="",r=true,h=0;if(v===false){r=v}if(a){if(a.uTabIndex){s=a.uTabIndex}g=a.Id1;e=a.Id2;if(g&&uniVars._actPge_.Id1&&g===uniVars._actPge_.Id1&&e!==uniVars._actPge_.Id2){return this.uniSelectFirst(o)}}if(!g){g=uniVars._actPge_.Id1}if(!e){e=uniVars._actPge_.Id2}if(u){u.tabItems.each(function(d,x){if(d.uTabIndex){if(g===d.Id1&&d.Id2!==e){return true}if(d.isVisible&&d.isVisible()==false){return true}if(d.isDisabled&&d.isDisabled()==true){return true}if(d.skipMe&&d.skipMe()==true){return true}if(d.uTabStop===false){return true}var c=d.ownerCt;while(c){if(c.isDisabled()==true){return true}if(c.isVisible()==false){return true}c=c.ownerCt}var f=d.uTabIndex;h=s-f;if(r){h=-h}if(j==-1||j>f){j=f;q=x}if(k<f){k=f;b=x}if(h>0&&h<t){t=h;y=x}}return true});if(y==-1&&l){if(r){y=q}else{y=b}}if(y>=0){var w=u.tabItems.get(y);if(w.focus){if(_ffc_(w,o,10)===false){return false}if(a){var n=a.getFocusEl(),m=a.focusCls;if(n&&m){n.removeCls(a.removeClsWithUI(m,true))}}}}}}return y},onFocus:function(b){var a=this;a.callParent(arguments);_sf2me_(a)},onBlur:function(b){var a=this;a.callParent(arguments);if(a.uniBlurChanged&&a.trackBlurChange){a.uniBlurChanged=false;ajaxRequest(a,"blurchange")}},addToTab:function(a){if(this.uform){if(a){this.uTabIndex=a}if(this.uform.tabItems.indexOf(this)==-1){this.uform.tabItems.add(this.id,this)}}},ismon:function(b){if(this.mons){for(var a=0;a<this.mons.length;a++){if(this.mons[a].ename==b){return(true)}}}return(false)},unimon:function(b,a,c){if(this.uniHasEvent[b]===true){return}if(this.events[b]===true){return}if(c&&this[c]){return}if(this.ismon(b)==false){this.mon(this.el,b,a,this)}},initUniEvents:function(){if(this.monitorUniEvents){this.unimon("mouseover",this.ev_mouseover,"onMouseOver");this.unimon("mouseout",this.ev_mouseout,"onMouseOut");this.unimon("mousedown",this.ev_mousedown);this.unimon("mouseup",this.ev_mouseup);this.unimon("mousemove",this.ev_mousemove);this.unimon("click",this.ev_click,"onClick");this.unimon("dblclick",this.ev_dblclick)}},uniGetXY:function(f){var d=this.__X=d;var c=this.__Y=c;var a=f.button;if(f.browserEvent.touches){var e=f.browserEvent;if(e.targetTouches&&e.targetTouches[0]){var g=this.getPosition();d=e.targetTouches[0].pageX-g[0];c=e.targetTouches[0].pageY-g[1]}}else{var g=this.getPosition();d=f.getX()-g[0];c=f.getY()-g[1]}this.__X=d;this.__Y=c;return({x:d,y:c,b:a})},do_mouseover:function(a){this.fireEvent("mouseover",this)},do_mouseout:function(a){this.fireEvent("mouseout",this)},do_mousedown:function(d,c,e,a){this.fireEvent("mousedown",this,c,e,a)},do_mouseup:function(d,c,e,a){this.fireEvent("mouseup",this,c,e,a)},do_mousemove:function(d,c,e,a){this.fireEvent("mousemove",this,c,e,a)},ev_mouseover:function(a){if(!this.disabled){this.do_mouseover(a)}},ev_mouseout:function(a){if(!this.disabled){this.do_mouseout(a)}},ev_mousedown:function(a){if(!this.disabled){var b=this.uniGetXY(a);this.do_mousedown(a,b.x,b.y,b.b)}},ev_mouseup:function(a){if(!this.disabled){var b=this.uniGetXY(a);this.do_mouseup(a,b.x,b.y,b.b)}},ev_mousemove:function(a){if(!this.disabled){var b=this.uniGetXY(a);this.do_mousemove(a,b.x,b.y,b.b)}},ev_click:function(a){if(!this.disabled){this.fireEvent("click",this)}},ev_dblclick:function(a){if(!this.disabled){this.fireEvent("dblclick",this)}},endDrag:function(){var a=this.getPosition(true);this.fireEvent("enddrag",this,a[0],a[1])}});Ext.override(Ext.panel.DD,{endDrag:function(){this.callParent();var a=this.panel.getPosition(true);this.panel.fireEvent("enddrag",this,a[0],a[1])}});Ext.override(Ext.grid.feature.Summary,{getSummary:function(a,b,f,e){var d=!!e,c=d?e:a;if(Ext.isFunction(b)){if(!d){return c.aggregate(b,this,false,[f])}}return this.callParent(arguments)}});Ext.override(Ext.form.field.Text,{initComponent:function(){var a=this;a.callParent();a.on("afterrender",function(b){if(b.uniInpMaskObj){$("#"+b.id+"-inputEl").inputmask(b.uniInpMaskObj)}if(b.uniFmtObj){$("#"+b.id+"-inputEl").autoNumeric("init",b.uniFmtObj)}if(a.allowTextDrop===true){a.inputEl.dom.ondragover=function(c){c.stopPropagation()};a.inputEl.dom.ondrop=function(c){c.stopPropagation()}}},a)},getValue:function(){var b=this.callParent(arguments);if(b&&this.uniCase){var a=document.documentElement.lang;if(!a){a=""}if(this.uniCase=="up"&&b.toLocaleUpperCase){b=b.toLocaleUpperCase(a)}else{if(this.uniCase=="low"&&b.toLocaleLowerCase){b=b.toLocaleLowerCase(a)}}}return b},onKeyDown:function(b){this.callParent(arguments);var a=b.getKey();if(a==b.TAB){_prkeyd_(this,"text",a,_pss_(b),false,null,false,b)}}});function showBrowserWarning(a){if(Ext.isIE&&(!document.documentMode||document.documentMode<9)){Ext.Msg.show({title:"Warning",msg:a,buttons:Ext.MessageBox.OK})}}Ext.define("Ext.form.field.Dummy",{extend:"Ext.form.field.Display",alias:"widget.dummyfield",valBool:undefined,setValue:function(a){this.valBool=a;this.callParent(arguments)},getValue:function(){if(this.column&&this.column.checkColumn){return this.valBool}return null}});Ext.define("Ext.panel.iframe",{extend:"Ext.panel.Panel",mixins:["uniIFrame"],onRender:function(){this.callParent(arguments);var a={run:function(){if(this.iframe){var b=this.getDoc();if(b.body||b.readyState=="complete"){Ext.TaskManager.stop(a);Ext.defer(this.initEditor,10,this)}}},interval:25,duration:15000,scope:this};Ext.TaskManager.start(a)}});function createMask(a){return new Ext.LoadMask(a)}Ext.override(Ext.grid.RowEditor,{cancelEdit:function(){this.canhide=true;this.callParent(arguments)},initComponent:function(){this.callParent(arguments);this.form.isValid=function(){return true}}});Ext.override(Ext.grid.plugin.RowEditing,{initEditorConfig:function(){var a=this.callParent(arguments);return Ext.apply(a,this.editorCfg)},startEdit:function(){if(this.editor){this.editor.canhide=false}return this.callParent(arguments)}});function _ifrm_(c){function b(l){var h="";l=l.dom;if(l){try{var k=l.contentWindow.document||l.contentDocument||window.frames[l.id].document;if(k){if(Ext.isOpera&&k.location=="about:blank"){return}if(k.body){if((contentNode=k.body.firstChild)&&/pre/i.test(contentNode.tagName)){h=contentNode.textContent}else{if((contentNode=k.getElementsByTagName("textarea")[0])){h=contentNode.value}else{h=k.body.textContent||k.body.innerText}}}}if(h&&h!=""){h=h.replace(/[\s+\.]/g,"");var g="___BASE64___";if(h.indexOf(g)===0){var f=h.substring(g.length);f=f.replace(/(\r\n|\n|\r)/gm,"");var f=Base64.decode(f);h=decodeURIComponent(f)}AjaxSuccess({responseText:h})}}catch(j){var d="";if(h&&h!=""){d=h}AjaxError(j.message,d)}}}var a=Ext.DomHelper.append(document.body,{tag:"iframe","class":"x-hidden",id:c,name:c,frameBorder:0,width:0,height:0,css:"zIndex:-1000;display:none;visibility:hidden;position:absolute;width:0px;height:0px;",src:Ext.SSL_SECURE_URL},true);Ext.fly(a).on("load",Ext.Function.bind(b,this,[a]))}function _fixmultis_(a){if(a.selModel&&a.selModel.keyNav){a.selModel.keyNav.map.bindings.forEach(function(b){if(b.key=="A"&&b.ctrl){b.handler=function(){if(a.selModel.selectionMode=="MULTI"){a.selModel.selectAll()}}}})}}Ext.override(Ext.form.field.Hidden,{eSetValue:function(a){return this.setValue(eventDLM+a+eventDLM)}});Ext.define("Ext.ux.field.plugin.Clearable",{extend:"Ext.plugin.Abstract",alias:"plugin.clearable",config:{toggleEvent:"change",weight:-100},init:function(d){var b=this;var a=d.clearableEvent||b.getToggleEvent();var c=b.getWeight();if(!d.isXType("textfield")){Ext.Error.raise({msg:"Ext.form.field.plugin.Clearable: This plugin is intended for usage with textfield-derived components",field:d,fieldXtypes:d.getXTypes()})}d.setTriggers(Ext.applyIf(d.getTriggers(),{clear:{cls:Ext.baseCSSPrefix+"form-clear-trigger",weight:c,handler:function(){if(Ext.isFunction(d.clearValue)){d.clearValue()}else{d.setValue(null)}d.getTrigger("clear").hide();if(d.isXType("combobox")||d.isXType("datefield")){d.fireEvent("select",d)}},hidden:!d.getValue()}}));d.on("render",function(){var e={destroyable:true};d.hasClearButton=true;e[a]=function(h){var g=h.getValue();var f=false;switch(h.getXType()){case"numberfield":f=g!==null;break;default:f=g}h.getTrigger("clear")[f?"show":"hide"]()};e.unicleartoggle=e[a];if(d.isCellEditor){e.focus=e[a]}d.clearableListeners=d.on(e)},d,{single:true});Ext.Function.interceptAfter(d,"setReadOnly",b.syncClearTriggerVisibility,b)},destroy:function(){var a=this.getCmp();if(a.clearableListeners){a.clearableListeners.destroy()}},syncClearTriggerVisibility:function(){var d=this.getCmp();var b=d.getValue();var a=d.getTrigger("clear");var c=d.readOnly;a[b&&!c?"show":"hide"]()}});Ext.override(Ext.dom.Element,{setHtml:function(b,a,e,c){var d=this;if(c=="uniNullScope"){c=null}return d.callParent([b,a,e,c])}});Ext.override(Ext.form.trigger.Trigger,{afterFieldRender:function(){this.callParent(arguments);if(this.field.isCellEditor&&this.el){this.el.addCls("x-form-trigger-default");this.el.removeCls("x-form-trigger-grid-cell")}}});function freeDbColumns(a){Ext.Array.each(a,function(b){if(b.destroy){b.destroy()}});a.length=0}Ext.override(Ext.ZIndexManager,{onCollectionSort:function(){var a=this.callParent();if(!this.front&&this.topMost){this.front=this.topMost}return a}});if(Ext.calendar){Ext.override(Ext.calendar.panel.Panel,{initComponent:function(){var a=this,b=a.getTimezoneOffset();if(Ext.isNumber(b)){a.applyTimezoneOffset(b)}a.callParent(arguments)},doDestroy:function(){var b=this,a=b.getStore();b.callParent();if(a&&!a.destroyed){a.destroy()}},privates:{doSetView:function(a,c){var b=this;b.callParent(arguments);b.fireEvent("viewchange",b,a)}}});Ext.override(Ext.calendar.view.Base,{constructor:function(a){var b=this,c=b.getTimezoneOffset();b.callParent([a]);if(a.eventToolTips){b.eventTip=Ext.create("Ext.tip.ToolTip",{target:b.getEl(),delegate:".x-calendar-event",listeners:{beforeshow:function(f){var e=b.getStore().getEventSource(),d=Ext.get(f.currentTarget).getAttribute("data-eventid"),g=e.getById(Ext.Number.from(d,0));if(g){f.setHtml(g.get("title"))}}}})}if(Ext.isNumber(c)){b.applyTimezoneOffset(c)}},doDestroy:function(){var a=this;if(a.eventTip){a.eventTip.destroy()}a.callParent()},getUniOwner:function(){var a=this;while(a&&!Ext.isString(a.uname)){a=a.ownerCt}return a},viewRange:function(){var a=this.getVisibleRange();if(a){return{start:a.start,end:a.end}}return{start:0,end:0}},showAddForm:function(d,a){var b=this,f=d,g=b.getUniOwner();if(a.onCancel){a.onCancel.call(a.scope||b,b,d)}g.fireEvent("rangeselect",g,{StartDate:f.data.startDate,EndDate:f.data.endDate},b.xtype);return b}})}Ext.override(Ext.sparkline.Bar,{onUpdate:function(){var c=this.getValues();if(c.length&&Ext.isObject(c[0])){this.xVals=Ext.Array.clone(c);for(i=c.length;i--;){var a=c[i];if(Ext.isObject(a)){a=a.v}this.values[i]=a}}this.callParent(arguments);if(this.el){var b=this.getWidth();if(b){this.el.setWidth(b)}}},getRegionFields:function(h){if(this.xVals){var c=Ext.Array.from(this.xVals[h])}else{var c=Ext.Array.from(this.values[h])}var a=[],g,d,f,b=this.getWidgetRecord();for(d=c.length;d--;){var e=c[d];if(Ext.isObject(e)){g=e.v;f=e.l}else{g=e;f=""}a.push({isNull:g===null,value:g,color:this.calcColor(d,g,h),offset:h,label:f})}return a}});Ext.override(Ext.form.field.File,{onRender:function(){this.callParent(arguments);if(this.multiple===true){this.setMultiple(true)}},setMultiple:function(a){this.fileInputEl.dom.setAttribute("multiple",a)},onFileChange:function(a,g,d){this.callParent(arguments);if(this.memo){var c=this.getFiles();if(c.length){var b="";Ext.Array.each(c,function(e){b=b+e.name+"\n"});this.memo.setValue(b)}else{this.memo.setValue("")}}},getFiles:function(){return this.fileInputEl.dom.files}});Ext.override(Ext.selection.RowModel,{selectRecs:function(b){var a=this.store,c=[];if(b.length){Ext.Array.each(b,function(d){var e=a.findRecord("_r",d);if(e){c.push(e)}})}this.suspendEvent("selectionchange");try{if(c.length){this.select(c)}else{this.deselectAll()}}finally{this.resumeEvent("selectionchange")}}});